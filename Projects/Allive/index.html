<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Allive - í•¨ê»˜í•˜ëŠ” ì„¸ìƒ ì˜¬ë¦¬ë¸Œ | JS Blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="JeongShin ì˜ ì½”ë”© ë¸”ë¡œê·¸ ğŸ‘¨ğŸ»â€ğŸ’»">
    <meta name="google-site-verification" content="66JKoxw93huqhAdXO3P0K86NJZne5H-M3302YHcwoWI">
    <link rel="preload" href="/JeongShin_Blog/assets/css/0.styles.8bc6e67b.css" as="style"><link rel="preload" href="/JeongShin_Blog/assets/js/app.d2b9c418.js" as="script"><link rel="preload" href="/JeongShin_Blog/assets/js/2.20c94440.js" as="script"><link rel="preload" href="/JeongShin_Blog/assets/js/3.3ed94c34.js" as="script"><link rel="prefetch" href="/JeongShin_Blog/assets/js/10.82c67914.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/11.39fe8bc4.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/12.987ef25c.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/13.16da5986.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/14.6c73ec6b.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/15.16277415.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/16.2102efd8.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/17.671a9be6.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/18.561cf7df.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/19.07d068ec.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/20.8945de34.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/21.795d85af.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/22.ffb6b47d.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/23.eda34ff6.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/24.82c4257f.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/4.c8d338e9.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/5.ab08a565.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/6.3798c24e.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/7.5f6b3da9.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/8.f9e33ce9.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/9.0cd03083.js">
    <link rel="stylesheet" href="/JeongShin_Blog/assets/css/0.styles.8bc6e67b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/JeongShin_Blog/" class="home-link router-link-active"><img src="/JeongShin_Blog/images/logo.jpg" alt="JS Blog" class="logo"> <span class="site-name can-hide">JS Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/JeongShin_Blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/JeongShin_Blog/home/" class="nav-link">
  
</a></div><div class="nav-item"><a href="/JeongShin_Blog/aboutme/" class="nav-link">
  About me
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/JeongShin_Blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/JeongShin_Blog/home/" class="nav-link">
  
</a></div><div class="nav-item"><a href="/JeongShin_Blog/aboutme/" class="nav-link">
  About me
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/JeongShin_Blog/guide/" class="sidebar-link">Guide</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/JeongShin_Blog/Projects/" class="sidebar-heading clickable router-link-active open"><span>Projects</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/JeongShin_Blog/Projects/Allive/" aria-current="page" class="active sidebar-link">Allive - í•¨ê»˜í•˜ëŠ” ì„¸ìƒ ì˜¬ë¦¬ë¸Œ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JeongShin_Blog/Projects/Allive/#intro-í”„ë¡œì íŠ¸-ì†Œê°œ" class="sidebar-link">Intro. í”„ë¡œì íŠ¸ ì†Œê°œ</a></li><li class="sidebar-sub-header"><a href="/JeongShin_Blog/Projects/Allive/#note-1-serverless-graphql-chat-api" class="sidebar-link">Note 1. Serverless Graphql Chat API</a></li><li class="sidebar-sub-header"><a href="/JeongShin_Blog/Projects/Allive/#note-2-custom-event" class="sidebar-link">Note 2. Custom Event</a></li><li class="sidebar-sub-header"><a href="/JeongShin_Blog/Projects/Allive/#note-3-toast-ë§Œë“¤ê¸°" class="sidebar-link">Note 3. Toast ë§Œë“¤ê¸°</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/JeongShin_Blog/algorithms/" class="sidebar-heading clickable"><span>Algorithms</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="allive-í•¨ê»˜í•˜ëŠ”-ì„¸ìƒ-ì˜¬ë¦¬ë¸Œ"><a href="#allive-í•¨ê»˜í•˜ëŠ”-ì„¸ìƒ-ì˜¬ë¦¬ë¸Œ" class="header-anchor">#</a> Allive - í•¨ê»˜í•˜ëŠ” ì„¸ìƒ ì˜¬ë¦¬ë¸Œ</h1> <h2 id="intro-í”„ë¡œì íŠ¸-ì†Œê°œ"><a href="#intro-í”„ë¡œì íŠ¸-ì†Œê°œ" class="header-anchor">#</a> Intro. í”„ë¡œì íŠ¸ ì†Œê°œ</h2> <p>ì˜¬ë¦¬ë¸Œ í”„ë¡œì íŠ¸ ì†Œê°œ ë° í”„ë¡ íŠ¸ ì—”ë“œ ê°œë°œ íšŒê³  ì…ë‹ˆë‹¤ ğŸ˜</p> <p>í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œí•˜ë©´ì„œ ìˆì—ˆë˜ <strong>í°ê±´ ì—†ê³  ì‚¬ì†Œí•˜ê³  í•˜ì°®ì€ ê³ ë¯¼ì— ëŒ€í•œ íšŒê³ </strong>ë¥¼ ë‚¨ê²¨ë‘ê¸° ìœ„í•¨ ì…ë‹ˆë‹¤ âœï¸</p> <h4 id="ëœë”©-í˜ì´ì§€-ì˜¬ë¦¬ë¸Œ-ëœë”©-í˜ì´ì§€-ë§í¬"><a href="#ëœë”©-í˜ì´ì§€-ì˜¬ë¦¬ë¸Œ-ëœë”©-í˜ì´ì§€-ë§í¬" class="header-anchor">#</a> ëœë”© í˜ì´ì§€ : <a href="https://all-live.github.io/" target="_blank" rel="noopener noreferrer">ì˜¬ë¦¬ë¸Œ ëœë”© í˜ì´ì§€ ë§í¬<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p>TODO: ëª¨ë°”ì¼ ëŒ€ì‘</p> <h4 id="ì˜¬ë¦¬ë¸ŒëŠ”-ì–´ë–¤-í”„ë¡œì íŠ¸-ì¸ê°€ìš”-ğŸ™‹ğŸ»"><a href="#ì˜¬ë¦¬ë¸ŒëŠ”-ì–´ë–¤-í”„ë¡œì íŠ¸-ì¸ê°€ìš”-ğŸ™‹ğŸ»" class="header-anchor">#</a> ì˜¬ë¦¬ë¸ŒëŠ” ì–´ë–¤ í”„ë¡œì íŠ¸ ì¸ê°€ìš” ğŸ™‹ğŸ»</h4> <p>ì˜¬ë¦¬ë¸Œ í”„ë¡œì íŠ¸ (<strong>Allive</strong>, <strong>All Live Together</strong>)ëŠ” 2021ë…„ 3ì›”ë¶€í„° ê¸°íš ë° ê¸°ìˆ  ìŠ¤íƒ ìŠ¤í„°ë””, 9ì›”ë¶€í„° ë³¸ê²©ì ì¸ ê°œë°œì— ë“¤ì–´ê°„ <strong>ì¬ëŠ¥ë‚˜ëˆ” ì–´í”Œ</strong> í”„ë¡œì íŠ¸ ì…ë‹ˆë‹¤.</p> <p>ëŒ€í•™êµ 4í•™ë…„ ê°œë°œì 2ëª…ì´ì„œ í•™ê³¼ ê³µë¶€ ë° íšŒì‚¬ ì—…ë¬´ì™€ ë³‘í–‰í•˜ë©° í‡´ê·¼ í›„, ì£¼ë§ ì‹œê°„ ë“±ì„ í™œìš©í•˜ì—¬ ì—´ì •ì„ ë¶ˆ íƒœìš°ë©° ê°œë°œì¤‘ì¸ í”„ë¡œì íŠ¸ ì…ë‹ˆë‹¤. ğŸ”¥</p> <div class="center"><img src="/JeongShin_Blog/assets/img/allive_guide_3.c0a753c1.png" width="300" height="auto"> <img src="/JeongShin_Blog/assets/img/allive_guide_1.acb18f2c.png" width="300" height="auto"> <img src="/JeongShin_Blog/assets/img/allive_guide_2.7fb6658a.png" width="300" height="auto"></div> <p>ê°œë°œì ì†Œê°œ ì…ë‹ˆë‹¤.</p> <ul><li><p>ğŸ‘¨ğŸ»â€ğŸ’» í”„ë¡ íŠ¸ ì—”ë“œ ê°œë°œ - ì‹ ì •ì›… <a href="https://github.com/JeongShin" target="_blank" rel="noopener noreferrer">github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p>ğŸ‘¨ğŸ»â€ğŸ’» ë°±ì—”ë“œ ê°œë°œ - ì´ì‹ ìœ¡ <a href="https://github.com/leeshinyook" target="_blank" rel="noopener noreferrer">github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul> <h4 id="í”„ë¡ íŠ¸ì—”ë“œ-app-ê¸°ìˆ ìŠ¤íƒ"><a href="#í”„ë¡ íŠ¸ì—”ë“œ-app-ê¸°ìˆ ìŠ¤íƒ" class="header-anchor">#</a> í”„ë¡ íŠ¸ì—”ë“œ App ê¸°ìˆ ìŠ¤íƒ</h4> <ul><li><p>React Native</p></li> <li><p>Styled Components Native</p></li> <li><p>Recoil js</p></li> <li><p>Firebase (Cloud Messaging, Crashlytics, Analytics)</p></li></ul> <h4 id="í”„ë¡ íŠ¸ì—”ë“œ-web-ê¸°ìˆ ìŠ¤íƒ"><a href="#í”„ë¡ íŠ¸ì—”ë“œ-web-ê¸°ìˆ ìŠ¤íƒ" class="header-anchor">#</a> í”„ë¡ íŠ¸ì—”ë“œ Web ê¸°ìˆ ìŠ¤íƒ</h4> <ul><li>Next js -&gt; ìŠ¤íƒë§Œ next ì§€ ssr ì€ ì‚¬ìš© ëª»í–ˆìŒ (ì•ˆí–ˆìŒ)..</li></ul> <h4 id="ë°±ì—”ë“œ-ê¸°ìˆ ìŠ¤íƒ"><a href="#ë°±ì—”ë“œ-ê¸°ìˆ ìŠ¤íƒ" class="header-anchor">#</a> ë°±ì—”ë“œ ê¸°ìˆ ìŠ¤íƒ</h4> <ul><li><p>Java Spring</p></li> <li><p>AWS - elasticsearch</p></li> <li><p>Swagger</p></li> <li><p>Serverless Graphql API</p></li></ul> <h4 id="í”„ë¡œì íŠ¸-ì§„í–‰ìƒí™©"><a href="#í”„ë¡œì íŠ¸-ì§„í–‰ìƒí™©" class="header-anchor">#</a> í”„ë¡œì íŠ¸ ì§„í–‰ìƒí™©</h4> <table><thead><tr><th></th> <th>iOS</th> <th>Android</th> <th>Web</th></tr></thead> <tbody><tr><td>1ì°¨ ë°°í¬ - ë²„ì „ 1.0</td> <td>ë°°í¬ ì™„ë£Œ âœ…</td> <td>ë°°í¬ ì™„ë£Œ âœ…</td> <td>ë°°í¬ ì™„ë£Œ âœ…</td></tr> <tr><td>2ì°¨ ë°°í¬ - ë²„ì „ 1.1</td> <td>2021.12 ì˜ˆì •</td> <td>2021.12 ì˜ˆì •</td> <td>2021.12 ì˜ˆì •</td></tr></tbody></table> <p>2ì°¨ ë°°í¬ë¥¼ ë§ˆë¬´ë¦¬ë¡œ í”„ë¡œì íŠ¸ ë§ˆë¬´ë¦¬ ë  ì˜ˆì • ì…ë‹ˆë‹¤.</p> <h2 id="note-1-serverless-graphql-chat-api"><a href="#note-1-serverless-graphql-chat-api" class="header-anchor">#</a> Note 1. Serverless Graphql Chat API</h2> <p>ì±„íŒ… êµ¬í˜„ì„ ì•ë‘ê³  í˜‘ì—…ì¤‘ì¸ ë°±ì—”ë“œ ì¹œêµ¬ì—ê²Œ ì±„íŒ… ì„œë²„ë¥¼ ê°œë°œ í•´ë³´ê² ë‹¤ê³  í•˜ê³  í…ŒìŠ¤í¬ë¥¼ ë§¡ì•˜ë‹¤.</p> <p>ìŠ¤íƒì€ ì—¬ëŸ¬ê°€ì§€ ê³ ë¯¼ì„ í•˜ë‹¤ê°€ <code>Appsync</code> <code>Aurora postgres</code> <code>lambda</code> ë¡œ êµ¬ì„±ì„ í•˜ì˜€ê³  cdk ì½”ë“œ ì‘ì„± í›„ ë°°í¬ í–ˆë‹¤. ê·¸ëƒ¥ ê°œë°œ ë‹¨ê³„ë¶€í„° ì—´ì •ì ìœ¼ë¡œë‹¤ê°€ ëˆì´ ë§ì´ ë“ ë‹¤.. ğŸ˜µâ€ğŸ’«</p> <p>appsync ëŠ” <code>amplify</code> ë“±ì„ í†µí•´ì„œ ì‰½ê²Œ ìŠ¤í‚¤ë§ˆë¥¼ ì„¤ê³„í•˜ê³  ìë™ìœ¼ë¡œ ìƒì„±ë˜ëŠ” <code>resolver</code> ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ ì»¤ìŠ¤í„°ë§ˆì´ì§•ì´ ì–´ë µê³  ê°œë°œí•˜ë©´ì„œ ì½”ë“œë¥¼ ì§œëŠ” ì‹œê°„ë³´ë‹¤ <strong>aws vtl</strong> ë“± ë¬¸ë²•ì„ ì°¾ì•„ë³´ê±°ë‚˜ stack overflow ë§Œ í•˜ë£¨ì¢…ì¼ ë’¤ì§€ëŠ”ê±°ë³´ë‹¤ lambda ì— ì»¤ìŠ¤í…€ resolver ë¥¼ ì‚¬ìš©í•´ì„œ ì½”ë”©í•˜ëŠ” ì‹œê°„ì„ ë§ì´ ìŸëŠ”ê²Œ ë” ì¢‹ì•˜ê³  ê·¸ë ‡ê²Œ ì‹œì‘í•´ë³´ì•˜ë‹¤.</p> <p>ê°œì¸ì ìœ¼ë¡œ aws ë„íê°€ ë„ˆë¬´ ì½ê¸° ì–´ë µë‹¤..</p> <h3 id="resolver-ğŸ„â€â™‚ï¸"><a href="#resolver-ğŸ„â€â™‚ï¸" class="header-anchor">#</a> Resolver ğŸ„â€â™‚ï¸</h3> <p>ì•„ë˜ëŠ” ëŒë‹¤ index.ts ì½”ë“œ ì¼ë¶€ì´ë‹¤. ê°ê°ì˜ graphql query ì— resolver í•¨ìˆ˜ë¥¼ ë§¤í•‘ í•´ì£¼ì—ˆë‹¤. ì—¬ê¸°ê¹Œì§„ ì•„ì£¼ ìˆœì¡°ë¡œì› ë‹¤.</p> <div class="language-TS line-numbers-mode"><pre class="language-ts"><code>exports<span class="token punctuation">.</span><span class="token function-variable function">handler</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>event<span class="token operator">:</span> AppSyncEvent<span class="token punctuation">,</span> _<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">,</span> <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">param<span class="token operator">:</span> <span class="token builtin">unknown</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> token <span class="token punctuation">}</span> <span class="token operator">=</span> event<span class="token punctuation">.</span>arguments<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>token<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'TOKEN NOT FOUND'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> uid <span class="token punctuation">}</span> <span class="token operator">=</span> jwtDecode<span class="token operator">&lt;</span><span class="token punctuation">{</span> uid<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>uid<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'USER NOT AUTHENTICATED'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">switch</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>info<span class="token punctuation">.</span>fieldName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">'createMe'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">createMe</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>arguments<span class="token punctuation">.</span>createMeInput<span class="token punctuation">,</span> uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'createMessage'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">createMessage</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>arguments<span class="token punctuation">.</span>messageInput<span class="token punctuation">,</span> uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'createChatRoom'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">createChatRoom</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>arguments<span class="token punctuation">.</span>chatroomInput<span class="token punctuation">,</span> uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'listChatRooms'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">listChatRooms</span><span class="token punctuation">(</span>uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'listMessages'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">listMessages</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>arguments<span class="token punctuation">.</span>listMessageInput<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'getChatRoom'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">getChatRoom</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>arguments<span class="token punctuation">.</span>chatroomId<span class="token punctuation">,</span> uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'joinChatRoom'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">joinChatRoom</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>arguments<span class="token punctuation">.</span>chatroomId<span class="token punctuation">,</span> uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'updateUserChatRoom'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">updateUserChatRoom</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>arguments<span class="token punctuation">.</span>userChatRoomInput<span class="token punctuation">,</span> uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'RESOLVER NOT FOUND'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callback</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="pagination-âœ‚ï¸"><a href="#pagination-âœ‚ï¸" class="header-anchor">#</a> Pagination âœ‚ï¸</h3> <p><code>listMessages</code> resolver ì—ì„œ pagination ì„ ì–´ë–»ê²Œ êµ¬í˜„í• ì§€ ê³ ë¯¼ì´ì˜€ë‹¤. ìš°ì„  custom lambda ë¡œ ì‹œì‘í•œ ì´ìƒ ì§ì ‘ êµ¬í˜„í•´ì•¼ í–ˆë‹¤. ê¸°ì¡´ì— Rails Backend ê°œë°œí• ë•Œ</p> <div class="language-RB line-numbers-mode"><pre class="language-rb"><code>  posts <span class="token operator">=</span> posts<span class="token punctuation">.</span>page<span class="token punctuation">(</span>cursor<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ì™€ ê°™ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì˜ì¡´í•´ì™”ê³  ì•„ë¬´ë˜ë„ ë°±ì—”ë“œ ê°œë°œì„ ë§ì´ ì•ˆí•´ë³¸ë°ë‹¤ ì¿¼ë¦¬ë¥¼ LIMIT, OFFSET ë“±ì„ ì´ìš©í•´ì„œ êµ¬í˜„í•˜ê¸°ë„ ì• ë§¤í–ˆë‹¤.</p> <p>sql ì¿¼ë¦¬ë¥¼ ì§œê¸° ì–´ë ¤ìš´ê±°ë³´ë‹¤ page ë³„ë¡œ ë°ì´í„° ê°€ì ¸ì˜¤ë‹¤ ë„ì¤‘ì— ìƒëŒ€ê°€ ë©”ì‹œì§€ ë³´ë‚´ì„œ ì¶”ê°€ë˜ë©´ ì–´ë–»ê²Œ ì²˜ë¦¬í•´ì•¼í•˜ì§€?</p> <p>pagination ì´ ë°€ë¦¼ ì—†ì´ ë˜ë‚˜? ì´ëŸ° ê³ ë¯¼ë“¤ì´ ìˆëŠ”ë° ë‹¹ì¥ ëª¨ë¥´ê² ì–´ì„œ ë‚´ê²Œ ìµìˆ™í•œ js ìª½ì— ë¡œì§ì„ ë” ì§‘ì¤‘í•˜ì—¬ì„œ ì½”ë“œë¥¼ êµ¬í˜„ í•´ë´¤ë‹¤.</p> <p>ë°©ë²•ì€ column id ê°’ì„ ì´ìš©í•´ì„œ ê°€ì ¸ì˜¨ ë°ì´í„°ê¹Œì§€ë§Œ limit ìœ¼ë¡œ ìë¥´ê³  ë‹¤ìŒ í˜ì´ì§€ ì •ë³´ì™€ í•¨ê»˜ ë‹¤ìŒìœ¼ë¡œ ì²˜ìŒ ì½ì„ ë°ì´í„°ì˜ id ê°’ì„ ë„˜ê²¨ì£¼ëŠ” ì‹ìœ¼ë¡œ êµ¬í˜„í–ˆë‹¤.</p> <div class="language-TS line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">listMessages</span><span class="token punctuation">(</span><span class="token parameter">listMessageInput<span class="token operator">:</span> ListMessagesInput</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> chatroomId<span class="token punctuation">,</span> limit<span class="token punctuation">,</span> cursor <span class="token punctuation">}</span> <span class="token operator">=</span> listMessageInput<span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> records <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      SELECT *
      FROM messages
      INNER JOIN users
      ON users.useruid = messages.useruid
      WHERE messages.chatroomid = :chatroomId
      ORDER BY messages.createdat DESC
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      chatroomId<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ì¼ë‹¨ chatroomId ê¸°ë°˜ìœ¼ë¡œ ëª¨ë“  ë©”ì‹œì§€ë¥¼ ê¸ì–´ ì˜¨ë‹¤. ë­ ë©”ì‹œì§€ ì •ë§ ë§ì•„ë´ì•¼ ëª‡ë°±ê°œì¯¤ ë í…ë° </span>
  <span class="token comment">// ìš°ì„  ìš°ë¦¬ ì„œë¹„ìŠ¤ì—ëŠ” í° ë¬¸ì œê°€ ì—†ìœ¼ë¦¬ë¼ ìƒê° ëœë‹¤. </span>
  <span class="token comment">// ì´ì œ js ë‹¨ì—ì„œ pagination ì„ ì²˜ë¦¬</span>

  <span class="token keyword">return</span> paginate<span class="token operator">&lt;</span>Message<span class="token operator">&gt;</span><span class="token punctuation">(</span>records<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    limit<span class="token punctuation">,</span>
    cursor<span class="token punctuation">,</span>
    column<span class="token operator">:</span> <span class="token string">'messageid'</span><span class="token punctuation">,</span>
    map<span class="token operator">:</span> mapMessage<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// utils.ts</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">PageInfo</span> <span class="token punctuation">{</span>
  nextCursor<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  hasNextPage<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  totalCount<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">PaginateResult</span><span class="token operator">&lt;</span>Output<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  pageInfo<span class="token operator">:</span> PageInfo<span class="token punctuation">;</span>
  items<span class="token operator">:</span> Output<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> paginate <span class="token operator">=</span> <span class="token operator">&lt;</span>Output<span class="token operator">&gt;</span><span class="token punctuation">(</span>records<span class="token operator">:</span> AnyObject<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> params<span class="token operator">:</span> PaginateParams<span class="token operator">&lt;</span>Output<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> PaginateResult<span class="token operator">&lt;</span>Output<span class="token operator">&gt;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> limit<span class="token punctuation">,</span> cursor<span class="token punctuation">,</span> column<span class="token punctuation">,</span> map <span class="token punctuation">}</span> <span class="token operator">=</span> params<span class="token punctuation">;</span>

  <span class="token keyword">let</span> <span class="token punctuation">[</span>startIdx<span class="token punctuation">,</span> lastIdx<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> records<span class="token punctuation">.</span>reduce<span class="token operator">&lt;</span>PaginateResult<span class="token operator">&lt;</span>Output<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> curr<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">!</span>cursor <span class="token operator">&amp;&amp;</span> index <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">||</span> curr<span class="token punctuation">[</span>column<span class="token punctuation">]</span> <span class="token operator">===</span> cursor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span>startIdx<span class="token punctuation">,</span> lastIdx<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>index<span class="token punctuation">,</span> index <span class="token operator">+</span> limit<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>startIdx <span class="token operator">&lt;=</span> index <span class="token operator">&amp;&amp;</span> index <span class="token operator">&lt;</span> lastIdx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        acc<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">map</span><span class="token punctuation">(</span>curr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> lastIdx <span class="token operator">&amp;&amp;</span> records<span class="token punctuation">[</span>lastIdx<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        acc<span class="token punctuation">.</span>pageInfo<span class="token punctuation">.</span>nextCursor <span class="token operator">=</span> records<span class="token punctuation">[</span>lastIdx<span class="token punctuation">]</span><span class="token punctuation">[</span>column<span class="token punctuation">]</span><span class="token punctuation">;</span>
        acc<span class="token punctuation">.</span>pageInfo<span class="token punctuation">.</span>hasNextPage <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> acc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> pageInfo<span class="token operator">:</span> <span class="token punctuation">{</span> nextCursor<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> hasNextPage<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> totalCount<span class="token operator">:</span> records<span class="token punctuation">.</span>length <span class="token punctuation">}</span><span class="token punctuation">,</span> items<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><p>ì‚´ì§ ì•Œê³ ë¦¬ì¦˜ ì§œëŠ” ëŠë‚Œì´ì˜€ì§€ë§Œ ê²°ê³¼ëŠ” ëŒ€ì„±ê³µ ì´ì˜€ë‹¤.</p> <p>ì•„... ì•Œê³ ë¦¬ì¦˜ ê³µë¶€ ì–¸ì œí•˜ì§€ ã… ã… </p> <h3 id="ìµœì í™”"><a href="#ìµœì í™”" class="header-anchor">#</a> ìµœì í™”..?</h3> <p>cloud watch ë¡œ í™•ì¸ í–ˆì„ë•Œ ëŒ€ë¶€ë¶„ì˜ api ìš”ì²­ì´ 30 ~ 60 ms ë‚´ì— ì²˜ë¦¬ ë˜ì—ˆë‹¤. lambda ê°€ <strong>cold start</strong> ì¼ë•Œ í‰ê·  500ms ì¸ê±¸ ì œì™¸í•˜ë©´ ìƒê°í•œê±°ë³´ë‹¤ ì†ë„ê°€ ë¹¨ë¼ì„œ ì•„ì£¼ ë§Œì¡±ìŠ¤ëŸ¬ì› ë‹¤.</p> <p>ë¬¸ì œëŠ” <code>createMessage</code> ì—ì„œ ì²˜ë¦¬í•´ì¤˜ì•¼ í• ê²Œ ë§ì•„ì„œ í‰ê·  400 ~ 800 ms ì‘ë‹µ ì†ë„ê°€ ë‚˜ì™”ëŠ”ë°</p> <ol><li>userchatrooms unReadCnt ì»¬ëŸ¼ê°’ ì—…ë°ì´íŠ¸ (ìƒëŒ€ë°© ì½ì§€ ì•Šì€ ìˆ˜)</li> <li>fcm ì²˜ë¦¬</li> <li>chatroom lastMessage, lastMessagedAt ì»¬ëŸ¼ê°’ ì—…ë°ì´íŠ¸</li></ol> <p>ë¥¼ í•´ì¤˜ì•¼ í–ˆë‹¤. ë¨¼ì € <code>Promise.all</code> ì„ í†µí•œ ë³‘ë ¬ì²˜ë¦¬ë¥¼ í•´ì¤¬ì§€ë§Œ ê·¸ë˜ë„ ê·¸ë‚˜ë§ˆ í–¥ìƒëœê²Œ 300ms ~ 500ms ì¸ë° ê²°êµ­ ìœ ì € ì…ì¥ì—ì„œëŠ” ì´ ë˜í•œ ë©”ì‹œì§€ê°€ ë°”ë¡œê°€ì§€ ì•Šê¸° ë•Œë¬¸ì— ë‹µë‹µí•¨ì„ ëŠë‚„ ìˆ˜ ìˆë‹¤ ìƒê° ë˜ì—ˆë‹¤. (ì¼ë‹¨ ë‚˜ëŠ” ë‹µë‹µí–ˆë‹¤).</p> <div class="language-TS line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">createMessage</span><span class="token punctuation">(</span><span class="token parameter">messageInput<span class="token operator">:</span> CreateMessageInput<span class="token punctuation">,</span> userUid<span class="token operator">:</span> <span class="token builtin">string</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ìƒëµ</span>
  <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token punctuation">{</span>
    messageId<span class="token operator">:</span> messageId <span class="token operator">||</span> <span class="token function">uuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    body<span class="token punctuation">,</span>
    userUid<span class="token punctuation">,</span>
    createdAt<span class="token operator">:</span> now<span class="token punctuation">,</span>
    chatroomId<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>
      <span class="token string">'INSERT INTO messages (messageid,body,useruid,createdat,chatroomid) VALUES(:messageId,:body,:userUid,:createdAt,:chatroomId)'</span><span class="token punctuation">,</span>
      message<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">UPDATE chatrooms SET lastmessage = :body, lastmessageat = :now WHERE chatroomid = :chatroomId</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      body<span class="token punctuation">,</span>
      now<span class="token punctuation">,</span>
      chatroomId<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token function">mapFcmPromises</span><span class="token punctuation">(</span>chatroom<span class="token punctuation">,</span> me<span class="token punctuation">,</span> body<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token function">mapUpdateUserChatRoomPromises</span><span class="token punctuation">(</span>chatroom<span class="token punctuation">,</span> me<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>message<span class="token punctuation">,</span> writer<span class="token operator">:</span> me <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>ê²°êµ­ ë§ˆì§€ë§‰ ìµœí›„ì˜ ìˆ˜ë‹¨ì€ ì–´ì°¨í”¼ ì„œë²„ì—ì„œ ë¬¸ì œ ì—†ì´ ë©”ì‹œì§€ê°€ ê°„ë‹¤ê³  ê°€ì •í•˜ê³  í”„ë¡ íŠ¸ ë‹¨ì—ì„œ ì²˜ë¦¬ë¥¼ í•´ì¤˜ì•¼ê² ë‹¤ ìƒê°ì„ ë°”ê¿¨ë‹¤.</p> <div class="language-TS line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">const</span> messageSubmitHandler <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> body <span class="token punctuation">}</span><span class="token operator">:</span> MessageBarForm</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> messageId <span class="token operator">=</span> uuid<span class="token punctuation">.</span><span class="token function">v4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> message<span class="token operator">:</span> Message <span class="token operator">=</span> <span class="token punctuation">{</span>
      writer<span class="token operator">:</span> <span class="token punctuation">{</span>
        userId<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>currentUser<span class="token punctuation">.</span>userId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        userUid<span class="token operator">:</span> currentUser<span class="token punctuation">.</span>userUid<span class="token punctuation">,</span>
        nickname<span class="token operator">:</span> currentUser<span class="token punctuation">.</span>nickname<span class="token punctuation">,</span>
        deviceToken<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        profile<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      body<span class="token punctuation">,</span>
      messageId<span class="token punctuation">,</span>
      chatroomId<span class="token punctuation">,</span>
      createdAt<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// ìš°ì„  ë©”ì‹œì§€ê°€ ë¬¸ì œì—†ì´ ìƒê¸°ë¦¬ë¼ ê°€ì •í•˜ê³  message list ì— ì¶”ê°€</span>
    queryClient<span class="token punctuation">.</span>setQueryData<span class="token operator">&lt;</span>PaginateResult<span class="token operator">&lt;</span>Message<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>messagesQueryKey<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">prev</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
      prev
        <span class="token operator">?</span> <span class="token punctuation">{</span>
            <span class="token operator">...</span>prev<span class="token punctuation">,</span>
            items<span class="token operator">:</span> <span class="token punctuation">[</span>message<span class="token punctuation">,</span> <span class="token operator">...</span>prev<span class="token punctuation">.</span>items<span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span>
        <span class="token operator">:</span> prev<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// API ìš”ì²­</span>
    <span class="token keyword">await</span> ChatApi<span class="token punctuation">.</span>Message<span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> body<span class="token punctuation">,</span> chatroomId<span class="token punctuation">,</span> messageId <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ì„±ê³µí•˜ë©´ createdAt ì„ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ì‹œ sorting í•´ì¤„ ìˆ˜ ìˆì§€ë§Œ ë„ì¤‘ì— ìˆœì„œê°€ ì„ì¼ ì •ë„ë¡œ ì±„íŒ…ì´ í™œë°œí• ê¹Œ</span>
    <span class="token comment">// ì‹¶ê¸°ë„ í•˜ê³  100 ~ 200 ms ì‚¬ì´ì— ë™ì‹œì— ë³´ë‚´ì§„ ë©”ì‹œì§€ê°€ ì ê¹ ìˆœì„œê°€ ë°”ë€Œì–´ ë³´ì—¬ë„ í¬ê²Œ ì‚¬ìš©ì ê²½í—˜ì„ í•´ì¹˜ì§„ ì•ŠëŠ”ë‹¤ ìƒê°í•œë‹¤. </span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="message-ui-ì²˜ë¦¬"><a href="#message-ui-ì²˜ë¦¬" class="header-anchor">#</a> Message UI ì²˜ë¦¬</h3> <p>ê°œì¸ì ìœ¼ë¡œ ì´ë²ˆ ì±„íŒ…ì„œë²„ ê°œë°œë™ì•ˆ ì œì¼ ì¬ë°Œì—ˆë˜ ë¶€ë¶„.</p> <p>RN ì—ì„œ <strong>react-native-gifted-chat</strong> ì´ë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìˆê¸´ í•˜ì§€ë§Œ ë˜ ì§ì ‘ êµ¬í˜„í•˜ê¸°ë¡œ ë§ˆìŒ ë¨¹ì—ˆë‹¤.</p> <p>ì‚´ì§ ê¹Œë‹¤ë¡œì› ë˜ê²Œ í”„ë¡œí•„ì€ ì˜¬ë¼ê°€ê³  ë‚ ì§œëŠ” ë™ì¼í•˜ë©´ ë‚´ë ¤ê°€ê³  ë“± ì•, ë’¤ ë©”ì‹œì§€ì— ë”°ë¥¸ ë·°ì²˜ë¦¬ì¸ë°</p> <div class="language-TS line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">const</span> renderItem<span class="token operator">:</span> ListRenderItem<span class="token operator">&lt;</span>Message<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> item<span class="token operator">:</span> currMessage<span class="token punctuation">,</span> index <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> isMyMessage <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>currMessage<span class="token punctuation">.</span>writer<span class="token punctuation">.</span>userId<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">Number</span><span class="token punctuation">(</span>myUserId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> nextMessage <span class="token operator">=</span> messages<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> prevMessage <span class="token operator">=</span> messages<span class="token punctuation">[</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> prevYYYYMd <span class="token operator">=</span> prevMessage <span class="token operator">?</span> <span class="token function">format</span><span class="token punctuation">(</span>prevMessage<span class="token punctuation">.</span>createdAt <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token constant">TIME_FORMAT</span><span class="token punctuation">.</span>YYYYMd<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> currYYYYMd <span class="token operator">=</span> <span class="token function">format</span><span class="token punctuation">(</span>currMessage<span class="token punctuation">.</span>createdAt <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token constant">TIME_FORMAT</span><span class="token punctuation">.</span>YYYYMd<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> prevHHmm <span class="token operator">=</span> prevMessage <span class="token operator">?</span> <span class="token function">format</span><span class="token punctuation">(</span>prevMessage<span class="token punctuation">.</span>createdAt <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token constant">TIME_FORMAT</span><span class="token punctuation">.</span>HHmm<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> currHHmm <span class="token operator">=</span> <span class="token function">format</span><span class="token punctuation">(</span>currMessage<span class="token punctuation">.</span>createdAt <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token constant">TIME_FORMAT</span><span class="token punctuation">.</span>HHmm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> isNextDiffUser <span class="token operator">=</span> nextMessage <span class="token operator">?</span> nextMessage<span class="token punctuation">.</span>writer<span class="token punctuation">.</span>userId <span class="token operator">!==</span> currMessage<span class="token punctuation">.</span>writer<span class="token punctuation">.</span>userId <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> isPrevDiffUser <span class="token operator">=</span> prevMessage <span class="token operator">?</span> prevMessage<span class="token punctuation">.</span>writer<span class="token punctuation">.</span>userId <span class="token operator">!==</span> currMessage<span class="token punctuation">.</span>writer<span class="token punctuation">.</span>userId <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> isMyMessage <span class="token operator">?</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>MyMessageBubble
        message<span class="token operator">=</span><span class="token punctuation">{</span>currMessage<span class="token punctuation">}</span>
        currHHmm<span class="token operator">=</span><span class="token punctuation">{</span>currHHmm<span class="token punctuation">}</span>
        currYYYYMd<span class="token operator">=</span><span class="token punctuation">{</span>currYYYYMd<span class="token punctuation">}</span>
        isNextDiffUser<span class="token operator">=</span><span class="token punctuation">{</span>isPrevDiffUser<span class="token punctuation">}</span>
        isHHmmDiff<span class="token operator">=</span><span class="token punctuation">{</span>currHHmm <span class="token operator">!==</span> prevHHmm <span class="token operator">||</span> isPrevDiffUser<span class="token punctuation">}</span>
        isDiffDate<span class="token operator">=</span><span class="token punctuation">{</span>currYYYYMd <span class="token operator">!==</span> prevYYYYMd <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token operator">!</span>prevMessage<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>OtherMessageBubble
        message<span class="token operator">=</span><span class="token punctuation">{</span>currMessage<span class="token punctuation">}</span>
        currHHmm<span class="token operator">=</span><span class="token punctuation">{</span>currHHmm<span class="token punctuation">}</span>
        currYYYYMd<span class="token operator">=</span><span class="token punctuation">{</span>currYYYYMd<span class="token punctuation">}</span>
        isNextDiffUser<span class="token operator">=</span><span class="token punctuation">{</span>isNextDiffUser<span class="token punctuation">}</span>
        isHHmmDiff<span class="token operator">=</span><span class="token punctuation">{</span>currHHmm <span class="token operator">!==</span> prevHHmm <span class="token operator">||</span> isPrevDiffUser<span class="token punctuation">}</span>
        isDiffDate<span class="token operator">=</span><span class="token punctuation">{</span>currYYYYMd <span class="token operator">!==</span> prevYYYYMd <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token operator">!</span>prevMessage<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>messages<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>ìš”ëŸ°ì‹ìœ¼ë¡œ í•œë²ˆ í•´ë´¤ê³ </p> <div class="center"><img src="/JeongShin_Blog/assets/img/chat1.b8e32f39.png" width="300" height="auto"> <img src="/JeongShin_Blog/assets/img/chat2.74e64219.png" width="300" height="auto"> <img src="/JeongShin_Blog/assets/img/chat3.41ba712f.png" width="300" height="auto"></div> <p>ìƒê°ë³´ë‹¤ ì´ì˜ê²Œ ì˜ë‚˜ì˜¨ë‹¤. ë‚˜ì¤‘ì— ì‹œê°„ë˜ë©´ ì‚¬ì§„ ì—…ë¡œë“œê¹Œì§€ ë¶™ì´ê³  ì‹¶ê¸´í•˜ë‹¤.</p> <p>ì´ì œ ë‹¨í†¡ë°© êµ¬í˜„ í•´ì•¼ì§€...</p> <h2 id="note-2-custom-event"><a href="#note-2-custom-event" class="header-anchor">#</a> Note 2. Custom Event</h2> <p>RN í™˜ê²½ì—ì„œ ê°œë°œì„ í•˜ë‹¤ê°€ <code>Custom Event</code> ë¥¼ ë°œìƒì‹œì¼œì•¼ í•˜ëŠ” ìƒí™©ì´ ìƒê²¼ë‹¤.</p> <p>ì¸ìŠ¤íƒ€ê·¸ë¨ê³¼ ê°™ì€ ì•±ì—ì„œ í•˜ë‹¨ íƒ­ì„ ì—¬ëŸ¬ë²ˆ íƒ­í•˜ê±°ë‚˜ ë¡œê³ ë¥¼ ëˆ„ë¥´ëŠ” ê²½ìš° ìŠ¤í¬ë¡¤ì„ ì­‰ ì˜¬ë ¤ì£¼ëŠ” êµ¬í˜„ì„ í•˜ê³  ì‹¶ì—ˆë‹¤.</p> <h3 id="ë¬¸ì œì "><a href="#ë¬¸ì œì " class="header-anchor">#</a> ë¬¸ì œì </h3> <ul><li>í•˜ë‹¨ íƒ­ ì»´í¬ë„ŒíŠ¸ì™€ ë¦¬ìŠ¤íŠ¸ ì»´í¬ë„ŒíŠ¸ê°€ ì™„ì „íˆ ë¶„ë¦¬ëœ ì»´í¬ë„ŒíŠ¸ì´ê¸° ë•Œë¬¸ì— ì†Œí†µí•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ê°€ ì•„ë‹ˆì˜€ë‹¤.</li> <li>Node Module <strong>events</strong> ë¥¼ ì‚¬ìš©í•´ì„œ ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œì¼œ êµ¬í˜„í•˜ê³  ì‹¶ì—ˆì§€ë§Œ React Native í™˜ê²½ì—ì„œëŠ” ê¸°ë³¸ ëª¨ë“ˆì´ ì—†ë‹¤.</li> <li>ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì°¾ì•„ì„œ ì“¸ê¹Œ ê³ ë¯¼ í–ˆì§€ë§Œ ê·¸ëƒ¥ ì»¤ìŠ¤í…€ìœ¼ë¡œ ë§Œë“¤ì–´ ë³´ê¸°ë¡œ ê²°ì •í–ˆë‹¤.</li> <li>RN ì½”ì–´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì œì™¸í•˜ê³ ëŠ” ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©ì„ ìµœì†Œí™”í•˜ê¸° ìœ„í•œ ë…¸ë ¥ì´ë‹¤.. ã…ã…</li></ul> <h3 id="í•´ê²°ë°©ì•ˆ"><a href="#í•´ê²°ë°©ì•ˆ" class="header-anchor">#</a> í•´ê²°ë°©ì•ˆ</h3> <p>ì¼ë‹¨ ê¸°ë³¸ì ì¸ <code>addEventListener</code> ì™€ í´ë¦°ì—…ì„ ìœ„í•œ <code>removeEventListener</code> ë§Œ ëŸ¬í”„í•˜ê²Œ ì‘ì„±í•´ë³´ì•˜ë‹¤.</p> <div class="language-JS line-numbers-mode"><pre class="language-js"><code>type <span class="token function-variable function">Callback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">args<span class="token operator">?</span><span class="token operator">:</span> unknown</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword">void</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">EventClass</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> Listeners <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token operator">&lt;</span>string<span class="token punctuation">,</span> Callback<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">static</span> <span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token operator">:</span> string<span class="token punctuation">,</span> callback<span class="token operator">:</span> Callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>isNameString<span class="token punctuation">,</span> isCallbackFn<span class="token punctuation">,</span> isExists<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token keyword">typeof</span> name <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
      <span class="token keyword">typeof</span> callback <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">,</span>
      EventClass<span class="token punctuation">.</span>Listeners<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isNameString <span class="token operator">||</span> <span class="token operator">!</span>isCallbackFn <span class="token operator">||</span> isExists<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

    EventClass<span class="token punctuation">.</span>Listeners<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> name <span class="token operator">!==</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    EventClass<span class="token punctuation">.</span>Listeners<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">emit</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token operator">:</span> string<span class="token punctuation">,</span> args<span class="token operator">?</span><span class="token operator">:</span> unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> callback <span class="token operator">=</span> EventClass<span class="token punctuation">.</span>Listeners<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">callback</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> EventClass<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>ì´ì œ BottomTabs ì—ì„œ ê°™ì€ íƒ­ì„ ë‘ë²ˆ í´ë¦­í•˜ê²Œ ë˜ëŠ” ê²½ìš° ì´ë²¤íŠ¸ë¥¼ ë°œìƒ ì‹œí‚¨ë‹¤.</p> <div class="language-JS line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Event <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@all-live'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> BottomTabBar<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span>BottomTabBarProps<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> navigation<span class="token punctuation">,</span> state <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> onTabPressHandler <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">currIdx<span class="token operator">:</span> number<span class="token punctuation">,</span> idx<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>currIdx <span class="token operator">!==</span> idx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        navigation<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>routes<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>currIdx <span class="token operator">===</span> <span class="token constant">BOTTOM_TABS</span><span class="token punctuation">.</span><span class="token constant">HOME_TAB_SCREEN</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ë‘ë²ˆ ì—°ì†ìœ¼ë¡œ ê°™ì€ íƒ­ì„ íƒ­í•˜ëŠ” ê²½ìš° ì´ë²¤íŠ¸ ë°œìƒ</span>
        Event<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'scrollFlatListToTop'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ìƒëµ</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>ë¦¬ìŠ¤íŠ¸ ì»´í¬ë„ŒíŠ¸ì—ì„  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ë“±ë¡í•´ì¤€ë‹¤.</p> <div class="language-JS line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Event <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@all-live'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> AllTalentList<span class="token operator">:</span> <span class="token constant">FC</span><span class="token operator">&lt;</span>AllTalentListProps<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> navigation <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> flatListRef <span class="token operator">=</span> useRef<span class="token operator">&lt;</span>FlatList<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> onScrollToTopHandler <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    flatListRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">scrollToOffset</span><span class="token punctuation">(</span><span class="token punctuation">{</span> animated<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> offset<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡</span>
    Event<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scrollFlatListToTop'</span><span class="token punctuation">,</span> onScrollToTopHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// í´ë¦°ì—…</span>
      Event<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'scrollFlatListToTop'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ìƒëµ</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>ë™ì‘ì´ ì˜ë˜ëŠ”ê±¸ í™•ì¸í•˜ê³  ë‚˜ì„œ íƒ€ì… ì ìš©ì„ ì‹œì‘í–ˆë‹¤.</p> <p>ëª©í‘œëŠ” ì•„ë˜ì™€ ê°™ë‹¤.</p> <ol><li><p>ì´ë²¤íŠ¸ ì´ë¦„ ê°•ì œ ì‹œ</p></li> <li><p>ì´ë²¤íŠ¸ ì´ë¦„ì— ë”°ë¼ ì½œë°±ì— ì¸ìê°€ ìˆëŠ” ê²½ìš° ì¸ì íƒ€ì… ì •ì˜</p></li></ol> <p>ì½”ë“œê°€ ê·¸ë ‡ê²Œ ê¸¸ì§€ ì•Šì•„ì„œ ì „ì²´ì½”ë“œë¥¼ ì˜¬ë¦¬ìë©´</p> <div class="language-TS line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// ì—¬ê¸° ì¸í„°í˜ì´ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¸ì íƒ€ì…ì„ ê²°ì • í•´ì¤€ë‹¤.</span>
<span class="token keyword">interface</span> <span class="token class-name">CustomEvents</span> <span class="token punctuation">{</span>
  <span class="token comment">// ì´ë²¤íŠ¸ ì´ë¦„: ì¸ì íƒ€ì…</span>
  scrollFlatListToTop<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Callback<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">args<span class="token operator">:</span> <span class="token constant">T</span> <span class="token operator">|</span> Partial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> EventNames <span class="token operator">=</span> Extract<span class="token operator">&lt;</span><span class="token keyword">keyof</span> CustomEvents<span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">EventClass</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> Listeners <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">static</span> addEventListener<span class="token operator">&lt;</span>EventName <span class="token keyword">extends</span> <span class="token class-name">keyof</span> CustomEvents <span class="token operator">=</span> EventNames<span class="token operator">&gt;</span><span class="token punctuation">(</span>
    name<span class="token operator">:</span> EventName<span class="token punctuation">,</span>
    callback<span class="token operator">:</span> Callback<span class="token operator">&lt;</span>CustomEvents<span class="token punctuation">[</span>EventName<span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>isNameString<span class="token punctuation">,</span> isCallbackFn<span class="token punctuation">,</span> isExists<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token keyword">typeof</span> name <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
      <span class="token keyword">typeof</span> callback <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">,</span>
      EventClass<span class="token punctuation">.</span>Listeners<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isNameString <span class="token operator">||</span> <span class="token operator">!</span>isCallbackFn <span class="token operator">||</span> isExists<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

    EventClass<span class="token punctuation">.</span>Listeners<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token operator">:</span> EventNames</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> name <span class="token operator">!==</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> EventClass<span class="token punctuation">.</span>Listeners<span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">removeAllEventListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    EventClass<span class="token punctuation">.</span>Listeners<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> emit<span class="token operator">&lt;</span>EventName <span class="token keyword">extends</span> <span class="token class-name">keyof</span> CustomEvents <span class="token operator">=</span> EventNames<span class="token operator">&gt;</span><span class="token punctuation">(</span>name<span class="token operator">:</span> EventName<span class="token punctuation">,</span> args<span class="token operator">?</span><span class="token operator">:</span> CustomEvents<span class="token punctuation">[</span>EventName<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> callback <span class="token operator">=</span> EventClass<span class="token punctuation">.</span>Listeners<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">callback</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> EventClass<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><p>ì™€ ê°™ì´ í•´ì£¼ì—ˆê³  íƒ€ì… ì ìš©ì´ ì˜ ë˜ê³  ìˆëŠ”ì§€ í™•ì¸ í•´ë³´ì•˜ë‹¤.</p> <p>íƒ€ì…ì´ ì˜ ì ìš© ë˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸ í•˜ê¸° ìœ„í•´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì•„ë˜ì™€ ê°™ì´ ë³€ê²½</p> <div class="language-TS line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">CustomEvents</span> <span class="token punctuation">{</span>
  scrollFlatListToTop<span class="token operator">:</span> <span class="token punctuation">{</span> myParam<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>emit í•˜ëŠ” ë¶€ë¶„</strong></p> <div class="center"><img src="/JeongShin_Blog/assets/img/type_test1.d21debdd.png" width="100%" height="auto"></div> <p><strong>callback ë“±ë¡í•˜ëŠ” ë¶€ë¶„</strong></p> <div class="center"><img src="/JeongShin_Blog/assets/img/type_test2.d6f309e1.png" width="100%" height="auto"></div> <p>ì˜ëœë‹¤ ã…ã…</p> <h3 id="ê²°ê³¼"><a href="#ê²°ê³¼" class="header-anchor">#</a> ê²°ê³¼</h3> <p>ê±°ì˜ ë‡Œí”¼ì…œë¡œ êµ¬í˜„í•´ì„œ ì´ë ‡ê²Œ í•˜ëŠ”ê²Œ ë§ëŠ”ì§€ ëª¨ë¥´ê² ëŠ”ë° ê¸°ëŠ¥ì€ ëŒ€ì¶© í‰ë‚´ë‚¸ê±° ê°™ë‹¤.</p> <div class="center"><img src="/JeongShin_Blog/assets/img/custom_events.gif.7801c768.gif" width="300" height="600"></div> <h2 id="note-3-toast-ë§Œë“¤ê¸°"><a href="#note-3-toast-ë§Œë“¤ê¸°" class="header-anchor">#</a> Note 3. Toast ë§Œë“¤ê¸°</h2> <p>Toast Modal ì„ ì»¤ìŠ¤í…€í•˜ê²Œ ì œì‘í•´ì„œ ì‚¬ìš©í•˜ê³  ìˆëŠ”ë° ë¬¸ì œì ì´ ìˆì—ˆë‹¤.</p> <h3 id="ë¬¸ì œì -ğŸš¨"><a href="#ë¬¸ì œì -ğŸš¨" class="header-anchor">#</a> ë¬¸ì œì  ğŸš¨</h3> <p>Toast Modal ì´ ë– ìˆëŠ” ë™ì•ˆ í™”ë©´ì„ ì œì–´í•˜ì§€ ëª»í•œë‹¤.</p> <p>ë¬¸ì œê°€ ë°œìƒí•œ ì´ìœ ëŠ” <code>navigation</code> ì„ ì´ìš©í•´ì„œ <strong>transparent modal</strong> ë¡œ í™”ë©´ ì´ë™ì„ í•´ì„œ í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ì„ í–ˆëŠ”ë° ì•„ë˜ ìš”êµ¬ì‚¬í•­ì„ ì‰½ê²Œ ë§Œì¡±í•˜ê¸° ìœ„í•´ì„œì˜€ë‹¤.</p> <h3 id="ìš”êµ¬ì‚¬í•­-ğŸ’­"><a href="#ìš”êµ¬ì‚¬í•­-ğŸ’­" class="header-anchor">#</a> ìš”êµ¬ì‚¬í•­ ğŸ’­</h3> <div class="language- extra-class"><pre><code>âœ… Toast Modal ì´ ìƒê²¼ë‹¤ê°€ ì¼ì •ì‹œê°„ ì´í›„ ìë™ìœ¼ë¡œ ì‚¬ë¼ì ¸ì•¼í•¨
âœ… ì• ë‹ˆë§¤ì´ì…˜ (fade in, out) íš¨ê³¼ê°€ ìˆì–´ì•¼í•¨
âœ… í™”ë©´ ë’¤ì— ì»¨í…ì¸ ê°€ ë³´ì—¬ì•¼ í•¨
âŒ í™”ë©´ ì œì–´ê°€ ê°€ëŠ¥í•´ì•¼í•¨ â†’ ë¬¸ì œ ë°œìƒğŸ˜±
</code></pre></div><p>4ë²ˆ ë¬¸ì œë¥¼ ì¼ë‹¨ ëƒ…ë‘ê³  1ì°¨ ë°°í¬ë¥¼ í–ˆëŠ”ë° ì´ì œ í•´ê²°í•˜ê¸° ìœ„í•œ ë°©ë²•ì„ ìƒê°í•´ë³´ì•˜ë‹¤.</p> <h3 id="í•´ê²°ë°©ì•ˆ-ğŸ¤”"><a href="#í•´ê²°ë°©ì•ˆ-ğŸ¤”" class="header-anchor">#</a> í•´ê²°ë°©ì•ˆ ğŸ¤”</h3> <p>ê¸°ì¡´ ë°©ì‹ì€ ì•„ë˜ì™€ ê°™ì´ navigation ì„ í†µí•œ í™”ë©´ ì´ë™ì´ì˜€ë‹¤. í•´ë‹¹ ë°©ì‹ìœ¼ë¡œëŠ” ì• ë‹ˆë©”ì´ì…˜ì„ ë”°ë¡œ ì½”ë”©í•˜ì§€ ì•Šê³  êµ¬í˜„í•  ìˆ˜ ìˆì–´ì„œ í•˜ì˜€ëŠ”ë° 4ë²ˆ ë¬¸ì œë¥¼ í•´ê²° í•  ìˆ˜ ì—†ì—ˆë‹¤.</p> <div class="language-JS line-numbers-mode"><pre class="language-js"><code>navigation<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">'TOAST_MODAL'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> body<span class="token operator">:</span> <span class="token constant">TOAST_MESSAGES</span><span class="token punctuation">.</span><span class="token constant">TALENT</span><span class="token punctuation">.</span><span class="token constant">LIKED</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ì œì¼ ì²˜ìŒ ë– ì˜¬ë¦° í•´ê²°ë°©ì•ˆì€ navigation ì„ í†µí•œ í™”ë©´ ì´ë™ì´ ì•„ë‹Œ ì‘ì€ ì»´í¬ë„ŒíŠ¸ë¥¼ ë„ì›Œì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ í•´ê²° í•˜ê³ ì í•˜ì˜€ë‹¤.</p> <p>ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ìì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ ì œì–´í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— <strong><code>useImperativeHandle</code></strong> ì„ í™œìš© í•˜ì˜€ë‹¤.</p> <p>ì „ì²´ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ë‹¤.</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">type</span> Timer <span class="token operator">=</span> ReturnType<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeof</span> <span class="token attr-name">setTimeout</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">;

const TOAST_TIMEOUT_IN_MS = 1200;

const Toast = forwardRef</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ToastRef</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">((_, ref) =&gt; </span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> timer <span class="token operator">=</span> useRef<span class="token operator">&lt;</span>Timer <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> isAnimating <span class="token operator">=</span> useRef<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>boolean</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">(false);
  const </span><span class="token punctuation">{</span> bottomInset <span class="token punctuation">}</span><span class="token plain-text"> = useSafeArea();
  const animation = useRef(new Animated.Value(0)).current;

  const [body, setBody] = useState&lt;string | null&gt;(null);
  const [margin, setMargin] = useState</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>number</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">(0);

  const doneAnimatingCallback = useCallback(() =&gt; </span><span class="token punctuation">{</span>
    isAnimating<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token function">setBody</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token plain-text">, []);

  const timeOutHandler = useCallback(() =&gt; </span><span class="token punctuation">{</span>
    Animated<span class="token punctuation">.</span><span class="token function">timing</span><span class="token punctuation">(</span>animation<span class="token punctuation">,</span> <span class="token punctuation">{</span> toValue<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> duration<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> useNativeDriver<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span>
      doneAnimatingCallback
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token plain-text">, []);

  const onShowHandler = useCallback((toastProps: ToastProps) =&gt; </span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> timeOutInMs <span class="token operator">=</span> <span class="token constant">TOAST_TIMEOUT_IN_MS</span><span class="token punctuation">,</span> body<span class="token operator">:</span> toastBody <span class="token punctuation">}</span> <span class="token operator">=</span> toastProps<span class="token punctuation">;</span>
    <span class="token comment">// ì´ë¯¸ ë‹¤ë¥¸ toast ê°€ animating ì¤‘ì¸ ê²½ìš° ë‹¤ë¥¸ toast ëŠ” ì–µì œ</span>
    <span class="token comment">// 1. íì— ë„£ì–´ì„œ í•˜ë‚˜ì”© ì²˜ë¦¬í• ê¹Œ ìƒê°í–ˆì§€ë§Œ ì• ë§¤í•´ì„œ ì¤‘ë‹¨</span>
    <span class="token comment">// 2. ê¸°ì¡´ toast ë¥¼ ì·¨ì†Œí•˜ê³  ìƒˆë¡œìš´ toast ë¥¼ ë„ì›Œì£¼ëŠ” ë°©ì‹ë„ ê°€ëŠ¥í• ë“¯</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isAnimating<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    isAnimating<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token function">setBody</span><span class="token punctuation">(</span>toastBody<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Animated<span class="token punctuation">.</span><span class="token function">timing</span><span class="token punctuation">(</span>animation<span class="token punctuation">,</span> <span class="token punctuation">{</span> toValue<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> duration<span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span> useNativeDriver<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    timer<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>timeOutHandler<span class="token punctuation">,</span> timeOutInMs<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token plain-text">, []);

  const imperativeHandler = useCallback(
    () =&gt; (</span><span class="token punctuation">{</span>
      show<span class="token operator">:</span> onShowHandler
    <span class="token punctuation">}</span><span class="token plain-text">),
    []
  );

  const onBodyLayoutHandler = useCallback((event: LayoutChangeEvent) =&gt; </span><span class="token punctuation">{</span>
    <span class="token comment">// container left margin ì„ ê³„ì‚°í•˜ê¸° ìœ„í•¨</span>
    <span class="token keyword">const</span> containerWidth <span class="token operator">=</span> event<span class="token punctuation">.</span>nativeEvent<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> containerWidth <span class="token operator">!==</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token function">setMargin</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">DIMENSIONS</span><span class="token punctuation">.</span><span class="token constant">WIDTH</span> <span class="token operator">-</span> containerWidth<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token plain-text">, []);

  useImperativeHandle(ref, imperativeHandler, []);

  return (
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>body <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ToastStyle.Container</span></span>
          <span class="token attr-name">as</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Animated<span class="token punctuation">.</span>View<span class="token punctuation">}</span></span>
          <span class="token attr-name">leftMargin</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>margin<span class="token punctuation">}</span></span>
          <span class="token attr-name">bottomInset</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>bottomInset<span class="token punctuation">}</span></span>
          <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> opacity<span class="token operator">:</span> animation <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ToastStyle.BodyView</span></span> <span class="token attr-name">onLayout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onBodyLayoutHandler<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">GlobalText.TextSmall</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>whiteColor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>body<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">GlobalText.TextSmall</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ToastStyle.BodyView</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ToastStyle.Container</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  );
});

const ToastStyle = </span><span class="token punctuation">{</span>
  Container<span class="token operator">:</span> Styled<span class="token punctuation">.</span>View<span class="token operator">&lt;</span>SafeAreaInsets <span class="token operator">&amp;</span> <span class="token punctuation">{</span> leftMargin<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    position: absolute;
    bottom: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> bottomInset <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> theme <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> theme<span class="token punctuation">.</span>bottomTabBarHeight <span class="token operator">+</span> bottomInset <span class="token operator">+</span> <span class="token number">16</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px;
    margin-left: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> leftMargin <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> leftMargin<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px;
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  BodyView<span class="token operator">:</span> Styled<span class="token punctuation">.</span>View<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    border-radius: 8px;
    background-color: #000000aa;
    padding: 16px;
  </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token plain-text">;
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br></div></div><p>ê°ê° ìš”êµ¬ì‚¬í•­ì— ëŒ€í•œ êµ¬í˜„ì€ ì•„ë˜ì™€ ê°™ì´ ì§„í–‰í•¨!</p> <ol><li><p>Toast Modal ì´ ìƒê²¼ë‹¤ê°€ ì¼ì •ì‹œê°„ ì´í›„ ìë™ìœ¼ë¡œ ì‚¬ë¼ì ¸ì•¼í•¨</p> <p><code>imperativeHandler</code> ë¥¼ í†µí•´ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ <strong>onShowHandler</strong> ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë„ë¡ ì„¸íŒ…,</p> <p><strong>setBody</strong> ë¥¼ í†µí•´ ë·°ê°€ ë‚˜íƒ€ë‚˜ë„ë¡ í•˜ê³  <strong>Animated API</strong> ë¥¼ í†µí•´ opacity ì• ë‹ˆë©”ì´ì…˜ìœ¼ë¡œ fade in íš¨ê³¼ êµ¬í˜„</p> <p>animation ì€ useNativeDriver ë¥¼ í†µí•´ ë„¤ì´í‹°ë¸Œë¡œ ë„˜ê¹€</p> <p>setTimeOut ì„ í†µí•´ fade out animation í˜¸ì¶œ í›„ ì½œë°±ìœ¼ë¡œ ë‹¤ìŒ ì• ë‹ˆë©”ì´ì…˜ ê°€ëŠ¥í•˜ë„ë¡ isAnimating ê°’ ì—…ë°ì´íŠ¸</p></li> <li><p>ì• ë‹ˆë§¤ì´ì…˜ (fade in, out) íš¨ê³¼ê°€ ìˆì–´ì•¼í•¨</p> <p>ìœ„ì— ì„¤ëª…í•œ <strong>Animated API</strong> ë¡œ í•´ê²°!</p></li> <li><p>í™”ë©´ ë’¤ì— ì»¨í…ì¸ ê°€ ë³´ì—¬ì•¼ í•¨</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> CategoryTabScreen<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryTabScreenProps</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> = ({ navigation }) =&gt; </span><span class="token punctuation">{</span>
  <span class="token comment">// toast ì œì–´í•˜ê¸° ìœ„í•œ ref</span>
  <span class="token keyword">const</span> toastRef <span class="token operator">=</span> useRef <span class="token operator">&lt;</span> ToastRef <span class="token operator">&gt;</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> likePressHandler <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">subCategoryLikeInfo<span class="token operator">:</span> SubCategoryLikeInfo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// ìƒëµ</span>
        <span class="token comment">// show handler í˜¸ì¶œ</span>
        toastRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          body<span class="token operator">:</span> <span class="token function">getCategoryLikeToastBody</span><span class="token punctuation">(</span>subCategoryLikeInfo<span class="token punctuation">,</span> result<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ìƒëµ</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SafeAreaView</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">OtherComponents</span></span> <span class="token attr-name">likePressHandler</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>likePressHandler<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* SafeAreaView ì—ì„œ ê°€ì¥ ì•ìª½ì— ë…¸ì¶œ ë˜ë„ë¡ */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Toast</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>toastRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">SafeAreaView</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token plain-text">;
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div></li> <li><p>í™”ë©´ ì œì–´ê°€ ê°€ëŠ¥í•´ì•¼í•¨ ğŸ‘‰ í•µì‹¬ ì´ìŠˆ!</p></li></ol> <p>Container ì»´í¬ë„ŒíŠ¸ë¥¼ width: 100% ë¡œ Text ì»´í¬ë„ŒíŠ¸ë¥¼ margin: 0 auto ì™€ ê°™ì´ í•´ì¤„ ìˆ˜ ìˆì§€ë§Œ ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì€ ì˜ì—­ í„°ì¹˜ê°€ ë¶ˆê°€ëŠ¥ í•´ì§„ë‹¤.</p> <div class="center"><img src="/JeongShin_Blog/assets/img/toast.5b836feb.png" width="300" height="auto"></div> <p>ë”°ë¼ì„œ container width ëŠ” í† ìŠ¤íŠ¸ ê°€ë¡œ ê¸¸ì´ì— ë”± ë§ë„ë¡ í•˜ê³  margin-left ì†ì„±ì„ ë™ì ìœ¼ë¡œ ì¡°ì ˆ í•´ì£¼ëŠ” ë°©í–¥ìœ¼ë¡œ ì§„í–‰í–ˆë‹¤. í† ìŠ¤íŠ¸ë¥¼ ì œì™¸í•œ ëª¨ë“  ì˜ì—­ í„°ì¹˜ê°€ ê°€ëŠ¥í•˜ê²Œ í•˜ë„ë¡ í•˜ê¸° ìœ„í•¨ì´ë‹¤.</p> <p><code>onBodyLayoutHandler</code> ë¥¼ í†µí•´ body ì— ë”°ë¥¸ ë·°ì˜ ê°€ë¡œ ê¸¸ì´ë¥¼ ê³„ì‚°í•´ì„œ container margin-left ê°’ì„ ë™ì ìœ¼ë¡œ ì¡°ì ˆ.</p> <div class="center"><img src="/JeongShin_Blog/assets/img/toast_screen.2277a9a0.png" width="300" height="auto"></div> <p>ì˜ ì ìš©ëœ ëª¨ìŠµ. ë~!</p> <p><s>ê°œë°œì ì…ì¥ì—ì„  ë§ì€ ë³€í™”ê°€ ìˆì—ˆì§€ë§Œ ì‚¬ìš©ìë“¤ì€ í•´ë‹¹ ì´ìŠˆê°€ ìˆëŠ”ì§€ë„ ëª¨ë¥¼ë•Œê°€ ë§ë‹¤..ã…ã…</s></p> <p>ê·¸ë˜ë„ ë‚˜ë§Œ ë§Œì¡±í•˜ë©´ ë¨</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/JeongShin_Blog/guide/" class="prev">
        Guide
      </a></span> <span class="next"><a href="/JeongShin_Blog/algorithms/Problems/">
        ì•Œê³ ë¦¬ì¦˜ ì •ë¦¬ ë…¸íŠ¸
      </a>
      â†’
    </span></p></div>  <div><div id="comment"></div></div></main> <footer class="siteFooter">
  COPYRIGHTÂ©2020 ALL RIGHT JeongShin
  <br>sjeong1127@gmail.com . +82-10-2169-2142 .
  <br> <a href="https://www.instagram.com/jeongshin96/" target="_blank">Instagram</a> <a href="https://github.com/JeongShin" target="_blank">GitHub</a></footer></div><div class="global-ui"></div></div>
    <script src="/JeongShin_Blog/assets/js/app.d2b9c418.js" defer></script><script src="/JeongShin_Blog/assets/js/2.20c94440.js" defer></script><script src="/JeongShin_Blog/assets/js/3.3ed94c34.js" defer></script>
  </body>
</html>
